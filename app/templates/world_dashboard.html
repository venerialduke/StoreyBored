<h1>{{ world['name'] }}</h1>
<p>{{ world['description'] }}</p>

<h2>Select Timeline</h2>
<form method="post">
    <select name="timeline">
        {% for timeline in timelines %}
            <option value="{{ timeline['uuid'] }}">{{ timeline['name'] }}</option>
        {% endfor %}
    </select>
    <button type="submit">Select Timeline</button>
    <button type="button" onclick="location.href='{{ url_for('create_timeline', world_uuid=world['uuid']) }}'">Create New Timeline</button>
</form>

<h2>World Nodes in {{ selected_timeline_name }}</h2>

{% if world_nodes_by_type %}
    {% for node_type, nodes in world_nodes_by_type.items() %}
        <h3>Type {{ node_type }}</h3>
        <ul>
            {% for node in nodes %}
                <li>{{ node['name'] }}: {{ node['description'] }}</li>
                <a href="{{ url_for('edit_node', world_uuid=world['uuid'], node_uuid=node['uuid']) }}">Edit</a>
            {% endfor %}
        </ul>
    {% endfor %}
{% else %}
    <p>No nodes available in the selected timeline.</p>
{% endif %}

{% if selected_timeline_uuid %}
    <!-- Only show the button if a timeline is selected -->
    <button type="button" onclick="location.href='{{ url_for('create_node', world_uuid=world['uuid'], timeline_uuid=selected_timeline_uuid) }}'">Create New World Node</button>
{% else %}
    <!-- Show a message or prompt the user to select a timeline -->
    <p>Please select a timeline before creating a new world node.</p>
{% endif %}